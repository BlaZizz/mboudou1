<html>

<style>

  a {
    color: orange;
  }

</style>

<script src="https://mboudou-developer-edition.eu40.force.com/lightning/lightning.out.js"></script>

<div data-lightning-out="true"></div>

  <script>

    const appName = 'c:OptOutFromWrapper';
    const componentName = 'c:outOptForm';
    const lightningEndpoint = 'https://mboudou-developer-edition.eu40.force.com';
    const targetElement = document.querySelector("[data-lightning-out]");
    const componentAttributes = {

    };

    var _lightningReady = false;
if(!$.cookie("AccToken"))
{ 
    alert("Login to Salesforce First!!!");
}else{
	createChatterFeed('NEWS');
}



function setupLightning(callback) {
	var appName = "c:LightningOutDemo";
	 

	if (_lightningReady) {
		if (typeof callback === "function") {
			callback();
		}
	} else {
	    // Transform the URL for Lightning
	    var url = $.cookie("InstURL");
		url = url.replace("my.salesforce", "lightning.force");

	    $Lightning.use(appName, 
	        function() {
				_lightningReady = true;
				document.getElementById("lexcontainer").style.display = "";
				if (typeof callback === "function") {
					callback();
				}
	        }, url, $.cookie("AccToken"));
	}
}

function createChatterFeed(type, subjectId) {
    setupLightning(function() {
		$Lightning.createComponent("forceChatter:feed", {type: type, subjectId: subjectId}, "lexcontainer"); 
    });
}

  </script>


</html>
